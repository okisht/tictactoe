<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>


    <style>

    .tttContainer {
        width: 156px;
    }
    
    .ttt {
    display: flex;
    flex-wrap: wrap;
    }

    .ttt-box {
    height: 50px;
    width: 50px;
    border: 1px solid black;
    }
    
    
    
    </style>


</head>
<body>
    
<div class="tttContainer">
    <div class="ttt">
        <div class="ttt-box" data-value="0"></div>
        <div class="ttt-box" data-value="0"></div>
        <div class="ttt-box" data-value="0"></div>
        <div class="ttt-box" data-value="0"></div>
        <div class="ttt-box" data-value="0"></div>
        <div class="ttt-box" data-value="0"></div>
        <div class="ttt-box" data-value="0"></div>
        <div class="ttt-box" data-value="0"></div>
        <div class="ttt-box" data-value="0"></div>
    </div>

    <select>
        <option value="vsComputer">Play vs computer!</option>
        <option value="vsPlayer">Play vs Player!</option>
      </select>
</div>

<script
  src="http://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous">
</script>

<script>
    var moveCounter = 0;
    $('.ttt-box').click(function () {

        var ind = $('.ttt-box').index(this) + 1;
        var getVal = parseInt($(this).attr("data-value"));

        if (getVal === 0 && moveCounter%2 === 0 ) {
            $(this).attr("data-value",1);
            $(this).text("X");
            moveCounter = moveCounter +1;
            winStatement();
            }

        else if ( getVal === 0 && moveCounter%2 === 1 ) {
            $(this).attr("data-value",2);
            $(this).text("O");
            moveCounter = moveCounter +1;
            winStatement();
        }

        const vsToWho = $('select').val();
        if (vsToWho === 'vsComputer') {
            nextMove();
        }

        function winStatement() {

        var dataValues = collectValues();
       
            for (j=0; j < 3; j++) {
                if ( (dataValues[j] === dataValues[j + 3]) && (dataValues[j + 3] === dataValues[j + 6]) ) {

                    if (dataValues[j] === 2) {
                        console.log("O kazandı");
                    }
                    else if (dataValues[j] === 1) {
                        console.log("X kazandı");
                    }
                }

            }

            for (k=0; k<9; k++) {
                if ( (dataValues[k] === dataValues[k + 1]) && (dataValues[k + 1] === dataValues[k + 2]) ) {
                    
                    if (dataValues[k] === 2) {
                        console.log("O kazandı");
                    }
                    else if (dataValues[k] === 1) {
                        console.log("X kazandı");
                    }
                }
                k = k +2;
            }


            if ( ( (dataValues[0] === dataValues[4]) && (dataValues[4] === dataValues[8])  )|| ((dataValues[2] === dataValues[4]) && (dataValues[4] === dataValues[6])) ) {
                
                if (dataValues[4] === 2) {
                        console.log("O kazandı");
                    }
                    else if (dataValues[4] === 1) {
                        console.log("X kazandı");
                    }

            }


        }
    
    
        function nextMove(){

            const valueMatris = collectValues();

            if (moveCounter == 1) {
                if (valueMatris[4] === 0) {
                    $('.ttt-box').eq(4).attr("data-value",1);
                    $('.ttt-box').eq(4).text("O");
                    moveCounter = moveCounter +1;
                }

                else if (valueMatris[4] === 1) {
                    var randmMoves = [0,2,6,8]; 
                    var randmMove = randmMoves[Math.floor(Math.random() * randmMoves.length)];
                    $('.ttt-box').eq(randmMove).attr("data-value",1);
                    $('.ttt-box').eq(randmMove).text("O");
                    moveCounter = moveCounter +1;
                }

            }

            else if (moveCounter == 3) {
                
            }


        }

        function collectValues() {
            var dataVls = [];
            var k= $('.ttt-box').length;
            for(i=0; i<k; i++) {
                dataVls.push(parseInt($('.ttt-box').eq(i).attr('data-value')));
            }

            return dataVls;
        }
    }
    )


</script>


</body>



</html>